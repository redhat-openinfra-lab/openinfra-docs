
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Certificates/">
      
      
        <link rel="next" href="../DocumentationContribution/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>DNS Server - Openinfrastructure Lab</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dns-server" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Openinfrastructure Lab" class="md-header__button md-logo" aria-label="Openinfrastructure Lab" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Openinfrastructure Lab
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              DNS Server
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="pink"  aria-label="Go to the dark side"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Go to the dark side" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent="pink"  aria-label="Light side"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Light side" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Openinfrastructure Lab" class="md-nav__button md-logo" aria-label="Openinfrastructure Lab" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Openinfrastructure Lab
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to the Red Hat NA-SSA Lab's Documentation Site.
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MiscellaneousNotes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Miscellaneous Notes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../slideDeckLinks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Presentation Links
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Ceph
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Ceph
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ceph/CephAuthorization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authorization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ceph/CephCrushMap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CRUSH Map
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ceph/CephFS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CephFS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ceph/CephInstallation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation Instructions v5.x
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ceph/CephLogging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ceph/CephNetworking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Networking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ceph/CephOSD/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OSDs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ceph/CephRGW/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RADOS Gateway (RGW)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ceph/CephRHELUpgrade/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RHEL9 Upgrade
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ceph/CephRados/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RADOS Block Devices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ceph/CephSizing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sizing Guidelines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ceph/CephTuning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance Tuning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ceph/Cephv6installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation Instructions v6.x
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ceph/dataservices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Services SSAs - Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ceph/encryption/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Encryption
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    How To
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            How To
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Certificates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Certificates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    DNS Server
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    DNS Server
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview-of-dns-terms" class="md-nav__link">
    <span class="md-ellipsis">
      Overview of DNS Terms
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview of DNS Terms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dns-zones" class="md-nav__link">
    <span class="md-ellipsis">
      DNS Zones
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-and-managing-dns-in-the-lab" class="md-nav__link">
    <span class="md-ellipsis">
      Creating and Managing DNS in the Lab
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating and Managing DNS in the Lab">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#standards" class="md-nav__link">
    <span class="md-ellipsis">
      Standards
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zones" class="md-nav__link">
    <span class="md-ellipsis">
      Zones
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#records" class="md-nav__link">
    <span class="md-ellipsis">
      Records
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dns-server-creation" class="md-nav__link">
    <span class="md-ellipsis">
      DNS Server Creation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DNS Server Creation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#service-account" class="md-nav__link">
    <span class="md-ellipsis">
      Service Account
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage" class="md-nav__link">
    <span class="md-ellipsis">
      Storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network" class="md-nav__link">
    <span class="md-ellipsis">
      Network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Application Deployment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix" class="md-nav__link">
    <span class="md-ellipsis">
      Appendix
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Appendix">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#official-documentation-links" class="md-nav__link">
    <span class="md-ellipsis">
      Official Documentation Links
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#script-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Script Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DocumentationContribution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation Contribution
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ansiblesync/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ansible Tower
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jirachangerequest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab Change Requests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Proof Of Concept Topics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            Proof Of Concept Topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6_1" >
        
          
          <label class="md-nav__link" for="__nav_5_6_1" id="__nav_5_6_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Openshift
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6_1">
            <span class="md-nav__icon md-icon"></span>
            Openshift
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Proof%20Of%20Concept%20Topics/Openshift/AffinityRules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configure Affinity / Anti-Affinity Rules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Proof%20Of%20Concept%20Topics/Openshift/AzureAD/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrate with Azure AD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Proof%20Of%20Concept%20Topics/Openshift/CPUManager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configure CPU Pinning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Proof%20Of%20Concept%20Topics/Openshift/DedicatedLiveMigration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configure Dedicated Live Migration Network
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Proof%20Of%20Concept%20Topics/Openshift/Logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configure Logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Proof%20Of%20Concept%20Topics/Openshift/NMState/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Install NMState Operator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Proof%20Of%20Concept%20Topics/Openshift/activedirectory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrate with LDAP/AD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Proof%20Of%20Concept%20Topics/Openshift/imageregistry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Image Registry and VDDK Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Proof%20Of%20Concept%20Topics/Openshift/mustgather/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The must-gather Tool
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Proof%20Of%20Concept%20Topics/Openshift/secondaryScheduler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Secondary Scheduler
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    OCPv
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            OCPv
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OCPv/highAvailability/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes HA for VMs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OCPv/livemigrations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Live Migrations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OCPv/lvm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lvm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OCPv/mtv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration Toolkit for Virtualization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OCPv/network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OCPv/snapshots/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VM Snapshots and Clones
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OCPv/storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storage for VMs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OCPv/templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    ODF
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            ODF
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ODF/ODF/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Foundation Storage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ODF/backup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backup Restore
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ODF/monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ODF/multipath/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multipath
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ODF/multus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ODF/rbac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quotas and Permisstions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ODF/registry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Internal Registry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ODF/snapshot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Snapshots and Clones
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Openshift
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Openshift
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Openshift/Containers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Openshift/OCPBaremetalPI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCP Baremetal IPI Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Openshift/cloudinstallation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS OCP 4 Cloud Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Openshift/disasterrecovery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Disasterrecovery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Openshift/hcp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCP Hosted Control Plane
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Openshift/ocpCertificates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCP Certificates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Openshift/ocpGeneral/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCP General Info
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Openstack
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Openstack
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Openstack/OSP16.2Instructions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OSP 16.2 Installation Instructions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="dns-server">DNS Server</h1>
<h2 id="overview">Overview</h2>
<p>The lab DNS server is a pod on the OCP Baremetal Cluster in the openinfra project running a Technitium DNS Server.  The management login to the server is here:</p>
<p><a href="http://172.20.129.10:5380">http://172.20.129.10:5380</a></p>
<p>Upon logging in, you will see a Dashboard which will give you a high level overview of the DNS Server usage:</p>
<p>The hope is that we can then utilize the data here to then be able to clean up unused DNS entries as projects grow stagnant as it will be easy to determine the last usage of a DNS record.</p>
<h2 id="overview-of-dns-terms">Overview of DNS Terms</h2>
<p>This section is going to cover some DNS basics for those who may not be familiar with DNS.</p>
<h3 id="dns-zones">DNS Zones</h3>
<p>Zones are how a DNS Server organizes records.  When looking at the zones in the DNS server, you will see them named in one of two ways:</p>
<p><strong>Using a Domain Name</strong></p>
<p>Examples:</p>
<p><img alt="image" src="../../images/dns_image_1.png" /></p>
<p>These are as you would expect, the domain name <strong>openinfra.lab</strong> contains all DNS entries that look like <strong><something>.openinfra.lab</strong>.  The <something> may or may not contain a dot notation indicating a sub-domain:</p>
<ul>
<li>www.openinfral.lab</li>
<li>servera.openinfra.lab</li>
<li>partA.partB.openinfra.lab &lt;- partB is the sub-domain of openinfra.lab</li>
</ul>
<p>Typically within a DNS server, zones are used to delegate control over who can manage what domains.  For our purposes, this is not needed since our whole team is administrators within the lab.  Therefore, we are opting to use zones as an organization methodology and giving each subdomain its own zone.  This is why you see <strong>ocp-bm.openinfra.lab</strong> in the list.  The entries in there, such as <strong>api.ocp-bm.openinfra.lab</strong> could technically be in the <strong>openinfra.lab</strong> zone, but we opted to keep them separate for logical organization purposes.</p>
<p><strong>Using an Inverse Netmask</strong></p>
<p>Examples:</p>
<p><img alt="image" src="../../images/dns_image_2.png" /></p>
<p>These are used to store reverse lookup records.  The naming convention is the reverse order of the network CIDR, dropping any zeroes in the netmask. For example, the first one listed stores reverse lookup records for IP addresses 172.20.1.0/24.  </p>
<p><strong>Record Types</strong></p>
<p>Each zone is comprised of different record types. Below is a table with the most common record types at the top (<mark>highlighted</mark>) and the least common ones at the bottom of the record types you may need to create.</p>
<table>
<thead>
<tr>
<th>Record Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><mark>SOA</mark></td>
<td>There can be only one Start of Authority (SOA) record for a zone. The SOA record contains settings that are required by secondary name servers or recursive resolvers to know the minimum TTL for caching non existent records. This is created for you by default when you create a zone, however you should edit this and set your e-mail address as the point of contact for the zone you create.</td>
</tr>
<tr>
<td><mark>NS</mark></td>
<td>Name Server (NS) records tell other DNS resolvers the domain names of the authoritative DNS Servers that are hosting the current zone. This is created for you by default when you create a zone.</td>
</tr>
<tr>
<td><mark>PTR</mark></td>
<td>Pointer records allow you to map a domain name to an IP address to allow performing reverse lookups i.e. finding domain name associated with an IP address. A PTR record for localhost is created for you by default when you create a reverse lookup zone</td>
</tr>
<tr>
<td><mark>A</mark></td>
<td>Address record allows you to assign an IPv4 address to your domain or sub domain. This is the type of record you will be creating most often.</td>
</tr>
<tr>
<td><mark>CNAME</mark></td>
<td>Canonical name records allow you to point your domain or sub domain to another domain name. This is what is commonly referred to as an alias.</td>
</tr>
<tr>
<td><mark>AAAA</mark></td>
<td>This address record allows you to assign an IPv6 address to your domain or sub domain.</td>
</tr>
<tr>
<td>FWD</td>
<td>The FWD record allows you to specify the forwarder server address to be used in conditional forwarder zones.</td>
</tr>
<tr>
<td>SRV</td>
<td>Service records allow certain applications to discover where a service is hosted.</td>
</tr>
<tr>
<td>TXT</td>
<td>Text records allow specifying any text data. These records are commonly used for domain name verification process and for Sender Policy Framework (SPF) record to prevent your domain being misused for email spam.</td>
</tr>
<tr>
<td>CAA</td>
<td>Certification Authority Authorization (CAA) record allows you to specify which Certificate Authority is allowed to issue SSL/TLS certificates for your domain name to prevent misuse.</td>
</tr>
<tr>
<td>ANAME</td>
<td>This record allows you to have a CNAME like facility at the zone's apex. It can also be used for a sub domain. The DNS Server resolves the provided domain name in the record and returns A or AAAA response as per the QTYPE.</td>
</tr>
<tr>
<td>MX</td>
<td>Mail Exchange (MX) records allow you specify email servers so that you can receive email for your domain.</td>
</tr>
<tr>
<td>APP</td>
<td>The APP record allows you to specify which DNS App should be used to process the request.</td>
</tr>
</tbody>
</table>
<h2 id="creating-and-managing-dns-in-the-lab">Creating and Managing DNS in the Lab</h2>
<h3 id="standards">Standards</h3>
<p>We are trying to standardize on the DNS naming convention utilized in the lab and how the DNS Server is configured. At a high level:</p>
<ul>
<li>Each domain and/or sub-domain shall have its own Zone associated with it in the DNS server.</li>
<li>When creating a new Zone, edit the SOA record and change the Responsible Person entry to be your Red Hat email address.</li>
<li>Members wishing to create DNS records for their own projects/demos should utilize their kerberos username as a sub-domain when creating the Zone.  Example: phalmos.openinfra.lab, cjanisze.openinfra.lab.</li>
<li>On EVERY record you create in the DNS server, you should add your name to the COMMENT field in the event someone has a question on the entry/device it points to.</li>
<li>Only create reverse pointer records for entries which are going to be permanent/long lived.  Nothing is worse than having a DNS entry point to an IP and then having the IP - point to an incorrect DNS entry.</li>
</ul>
<h3 id="zones">Zones</h3>
<p>The primary DNS Zone in the server is the <strong>openinfra.lab</strong> zone.</p>
<p>When you need to create a new zone, go to the Zones tab and click Add Zone.  You will be prompted to name the zone:</p>
<p><img alt="image" src="../../images/dns_image_3.png" /></p>
<p>For the zone name, add the fully qualified DNS entry for the zone, select Primary Zone and click Add. If you ever need to also include reverse lookups, you should never really have to create the Reverse Lookup Zone manually, as you can have the DNS server create that zone for you when you create the A records in your zone. </p>
<p>Upon creation, the server will automatically create the NS and SOA records for you:</p>
<p><img alt="image" src="../../images/dns_image_4.png" /></p>
<p>Before you create anything in this zone, edit the SOA record and change the Responsible Party to your Red Hat email address:</p>
<p><img alt="image" src="../../images/dns_image_5.png" /></p>
<h3 id="records">Records</h3>
<p>To add records to a Zone, click on the Zone name to show the Zone.  Click Add Record button and you will be prompted to create the record:</p>
<p><img alt="image" src="../../images/dns_image_6.png" /></p>
<p>For each of the fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Setting</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td>This is the part of the DNS name which goes before the zone name.  For example, setting this to api will create a DNS entry for api.documentation.openinfra.lab.  Likewise, to create a wildcard entry, you can set this to <em>.apps which will create a wildcard DNS entry of </em>.apps.documentation.openinfra.lab.</td>
</tr>
<tr>
<td>Type</td>
<td>Typically this will be A for ipv4 and AAAA for ipv6.  For a complete list of DNS Record Types see the Record Types table in the previous section of this documentation.</td>
</tr>
<tr>
<td>TTL</td>
<td>You can leave this as is and it will default to 3600</td>
</tr>
<tr>
<td>IPv4 Address</td>
<td>Obviously enter the IP address here.</td>
</tr>
<tr>
<td>Comments</td>
<td>Enter your name.</td>
</tr>
</tbody>
</table>
<p>Check off the <code>Add reverse (PTR) record</code> if you require reverse lookups for your entry.  You may also need to check off <code>Create reverse zone for PTR record</code> if the reverse zone does not exist.  If it does not exist, an error will be thrown that it can’t find the zone and then you will need to check this box off.  I didn’t create this software, so don’t ask me why it does not just create it.</p>
<p>Click Save and that is it.</p>
<h2 id="dns-server-creation">DNS Server Creation</h2>
<p>This section documents how the DNS Server was created in the environment for historic purposes.</p>
<h3 id="service-account">Service Account</h3>
<p>The DNS server needs to be able to listen on privileged ports and therefore needs to execute in a security context that allows this.  To enable this, we create a Service Account called <strong>dns-openinfra-sa</strong> and add the privileged Security Context Constraints (SCC) to the service account:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>oc create sa dns-openinfra-sa
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>oc adm policy add-scc-to-user -z dns-openinfra-sa privileged
</code></pre></div>
<p>This service account is referenced when we do the deployment of the DNS application.</p>
<h3 id="storage">Storage</h3>
<p>We create a Persistent Volume Claim for the application to store the configuration data:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>cat &lt;&lt;EOF&gt;pvc.yaml
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>kind: PersistentVolumeClaim
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>apiVersion: v1
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>metadata:
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>  name: dns-pod-technitium-config
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>  namespace: openinfra
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>spec:
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>  accessModes:
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>    - ReadWriteOnce
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>  resources:
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>    requests:
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>      storage: 10Gi
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>  storageClassName: ocs-storagecluster-ceph-rbd
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>  volumeMode: Filesystem
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>EOF
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>oc apply -f ./pvc.yaml
</code></pre></div>
<p>This is then used by the deployment of the DNS application.</p>
<h3 id="network">Network</h3>
<p>In order to maintain consistency with what we have been using and not have to make major changes to already deployed infrastructure, we needed the DNS server to be attached to VLAN1101 and serve DNS on 172.20.129.10.  To do this, we created a Network Attachment Definition (NAD):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>cat &lt;&lt;EOF &gt;nad.yaml
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>apiVersion: k8s.cni.cncf.io/v1
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>kind: NetworkAttachmentDefinition
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>metadata:
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>  name: dns-openinfra-lab-nad
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>  namespace: openinfra
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>spec:
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>  config: ‘{
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>    &quot;name&quot;: &quot;dns-openinfra-lab&quot;,
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>    &quot;type&quot;: &quot;bridge&quot;,
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>    &quot;cniVersion&quot;: &quot;0.3.1&quot;,
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>    &quot;bridge&quot;: &quot;br1&quot;, &quot;vlan&quot;: 1101, &quot;isGateway&quot;: false, &quot;ipam&quot;: {  &quot;type&quot;:
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>    &quot;static&quot;, &quot;addresses&quot;: [{ &quot;address&quot;: &quot;172.20.129.10/24&quot; }],  &quot;routes&quot;: [{
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>    &quot;dst&quot;: &quot;172.20.0.0/16&quot;, &quot;gw&quot;: &quot;172.20.129.1&quot; }] } }
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>EOF
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>oc apply -f ./nad.yaml
</code></pre></div>
<p>This NAD is referenced when we do the deployment of the DNS application.</p>
<h3 id="application-deployment">Application Deployment</h3>
<p>This may or may not be the best way to deploy this application, but it worked for me.  I deployed it manually using the GUI and then extracted the YAML, made changes to it to get it to work.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>cat &lt;&lt;EOF&gt;dns.yaml
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>apiVersion: apps/v1
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>kind: Deployment
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>metadata:
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>  annotations:
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>    alpha.image.policy.openshift.io/resolve-names: &#39;*&#39;
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>    app.openshift.io/route-disabled: &quot;false&quot;
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>    deployment.kubernetes.io/revision: &quot;1&quot;
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>    image.openshift.io/triggers: &#39;[{&quot;from&quot;:{&quot;kind&quot;:&quot;ImageStreamTag&quot;,&quot;name&quot;:&quot;dns-openinfra-lab:latest&quot;,&quot;namespace&quot;:&quot;openinfra&quot;},&quot;fieldPath&quot;:&quot;spec.template.spec.containers[?(@.name==\&quot;dns-openinfra-lab\&quot;)].image&quot;,&quot;pause&quot;:&quot;false&quot;}]&#39;
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>  labels:
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>    app: dns-openinfra-lab
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>    app.kubernetes.io/component: dns-openinfra-lab
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>    app.kubernetes.io/instance: dns-openinfra-lab
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>    app.kubernetes.io/name: dns-openinfra-lab
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>    app.kubernetes.io/part-of: dns-openinfra-lab-app
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>    app.openshift.io/runtime-namespace: openinfra
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>  name: dns-openinfra-lab
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>  namespace: openinfra
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>spec:
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>  progressDeadlineSeconds: 600
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>  replicas: 1
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>  revisionHistoryLimit: 10
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>  selector:
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>    matchLabels:
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>      app: dns-openinfra-lab
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a>  strategy:
<a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>    rollingUpdate:
<a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a>      maxSurge: 25%
<a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a>      maxUnavailable: 25%
<a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a>    type: RollingUpdate
<a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a>  template:
<a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a>    metadata:
<a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a>      annotations:
<a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a>        k8s.v1.cni.cncf.io/networks: dns-openinfra-lab-nad
<a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a>      labels:
<a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a>        app: dns-openinfra-lab
<a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a>        deploymentconfig: dns-openinfra-lab
<a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a>    spec:
<a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a>      serviceAccountName: dns-openinfra-sa
<a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a>      containers:
<a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a>      - image: docker.io/technitium/dns-server
<a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a>        imagePullPolicy: Always
<a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a>        name: dns-openinfra-lab
<a id="__codelineno-3-44" name="__codelineno-3-44" href="#__codelineno-3-44"></a>        securityContext: { &quot;privileged&quot;: true }
<a id="__codelineno-3-45" name="__codelineno-3-45" href="#__codelineno-3-45"></a>        ports:
<a id="__codelineno-3-46" name="__codelineno-3-46" href="#__codelineno-3-46"></a>        - containerPort: 443
<a id="__codelineno-3-47" name="__codelineno-3-47" href="#__codelineno-3-47"></a>          protocol: TCP
<a id="__codelineno-3-48" name="__codelineno-3-48" href="#__codelineno-3-48"></a>        - containerPort: 443
<a id="__codelineno-3-49" name="__codelineno-3-49" href="#__codelineno-3-49"></a>          protocol: UDP
<a id="__codelineno-3-50" name="__codelineno-3-50" href="#__codelineno-3-50"></a>        - containerPort: 53
<a id="__codelineno-3-51" name="__codelineno-3-51" href="#__codelineno-3-51"></a>          protocol: TCP
<a id="__codelineno-3-52" name="__codelineno-3-52" href="#__codelineno-3-52"></a>        - containerPort: 53
<a id="__codelineno-3-53" name="__codelineno-3-53" href="#__codelineno-3-53"></a>          protocol: UDP
<a id="__codelineno-3-54" name="__codelineno-3-54" href="#__codelineno-3-54"></a>        - containerPort: 53443
<a id="__codelineno-3-55" name="__codelineno-3-55" href="#__codelineno-3-55"></a>          protocol: TCP
<a id="__codelineno-3-56" name="__codelineno-3-56" href="#__codelineno-3-56"></a>        - containerPort: 5380
<a id="__codelineno-3-57" name="__codelineno-3-57" href="#__codelineno-3-57"></a>          protocol: TCP
<a id="__codelineno-3-58" name="__codelineno-3-58" href="#__codelineno-3-58"></a>        - containerPort: 67
<a id="__codelineno-3-59" name="__codelineno-3-59" href="#__codelineno-3-59"></a>          protocol: UDP
<a id="__codelineno-3-60" name="__codelineno-3-60" href="#__codelineno-3-60"></a>        - containerPort: 80
<a id="__codelineno-3-61" name="__codelineno-3-61" href="#__codelineno-3-61"></a>          protocol: TCP
<a id="__codelineno-3-62" name="__codelineno-3-62" href="#__codelineno-3-62"></a>        - containerPort: 8053
<a id="__codelineno-3-63" name="__codelineno-3-63" href="#__codelineno-3-63"></a>          protocol: TCP
<a id="__codelineno-3-64" name="__codelineno-3-64" href="#__codelineno-3-64"></a>        - containerPort: 853
<a id="__codelineno-3-65" name="__codelineno-3-65" href="#__codelineno-3-65"></a>          protocol: TCP
<a id="__codelineno-3-66" name="__codelineno-3-66" href="#__codelineno-3-66"></a>        - containerPort: 853
<a id="__codelineno-3-67" name="__codelineno-3-67" href="#__codelineno-3-67"></a>          protocol: UDP
<a id="__codelineno-3-68" name="__codelineno-3-68" href="#__codelineno-3-68"></a>        resources: {}
<a id="__codelineno-3-69" name="__codelineno-3-69" href="#__codelineno-3-69"></a>        terminationMessagePath: /dev/termination-log
<a id="__codelineno-3-70" name="__codelineno-3-70" href="#__codelineno-3-70"></a>        terminationMessagePolicy: File
<a id="__codelineno-3-71" name="__codelineno-3-71" href="#__codelineno-3-71"></a>        volumeMounts:
<a id="__codelineno-3-72" name="__codelineno-3-72" href="#__codelineno-3-72"></a>        - mountPath: /etc/dns
<a id="__codelineno-3-73" name="__codelineno-3-73" href="#__codelineno-3-73"></a>          name: dns-openinfra-lab-config
<a id="__codelineno-3-74" name="__codelineno-3-74" href="#__codelineno-3-74"></a>      dnsPolicy: ClusterFirst
<a id="__codelineno-3-75" name="__codelineno-3-75" href="#__codelineno-3-75"></a>      restartPolicy: Always
<a id="__codelineno-3-76" name="__codelineno-3-76" href="#__codelineno-3-76"></a>      schedulerName: default-scheduler
<a id="__codelineno-3-77" name="__codelineno-3-77" href="#__codelineno-3-77"></a>      terminationGracePeriodSeconds: 30
<a id="__codelineno-3-78" name="__codelineno-3-78" href="#__codelineno-3-78"></a>      volumes:
<a id="__codelineno-3-79" name="__codelineno-3-79" href="#__codelineno-3-79"></a>      - name: dns-openinfra-lab-config
<a id="__codelineno-3-80" name="__codelineno-3-80" href="#__codelineno-3-80"></a>        persistentVolumeClaim:
<a id="__codelineno-3-81" name="__codelineno-3-81" href="#__codelineno-3-81"></a>          claimName: dns-pod-technitium-config
<a id="__codelineno-3-82" name="__codelineno-3-82" href="#__codelineno-3-82"></a>EOF
<a id="__codelineno-3-83" name="__codelineno-3-83" href="#__codelineno-3-83"></a>oc apply -f dns.yaml
</code></pre></div>
<h2 id="appendix">Appendix</h2>
<h3 id="official-documentation-links">Official Documentation Links</h3>
<p><a href="https://go.technitium.com/?id=25">User Guide/Help Topics</a>
<a href="https://github.com/TechnitiumSoftware/DnsServer/blob/master/APIDOCS.md">HTTP API Documentation</a></p>
<h3 id="script-examples">Script Examples</h3>
<p>You can use tools such as curl to automate actions with the DNS server.  </p>
<p><strong>Creating API Token</strong></p>
<p>To use scripts, you will need an API Token.  Login to the DNS Server, click the drop down next to your name in the top title bar and select Create API Token:</p>
<p><img alt="image" src="../../images/dns_image_7.png" /></p>
<p><strong>DO NOT DO THIS AS THE ADMIN USER! USE YOUR OWN ACCOUNT TO CREATE THIS TOKEN!</strong></p>
<p>You will then be prompted to create the token:</p>
<p><img alt="image" src="../../images/dns_image_8.png" /></p>
<p>Enter your login password to the server and enter a name you can use to identify the token.  Click Create.</p>
<p><mark><strong>YOU MUST COPY THE TOKEN DISPLAYED. YOU WILL NEVER SEE THIS TOKEN AGAIN. IF YOU DO NOT COPY IT AND STORE IT SOME PLACE SAFE AND FORGET IT, YOU WILL NEED TO CREATE A NEW TOKEN.</strong></mark></p>
<p>You can use this token as the TOKEN variable in the example scripts.</p>
<p><strong>Adding Records</strong></p>
<p>Here’s a short example of how one could easily add records to the DNS server:</p>
<p>Pre-requisites:</p>
<ul>
<li>Create an API Token</li>
<li>Create a Zone for the records</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>#!/bin/bash
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a># User and server details
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>SERVER=&quot;http://172.20.129.10:5380&quot;
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>DOMAIN=&quot;imm.openinfra.lab&quot;
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>TOKEN=&quot;xXxXxXxXxXxXxXxXxXxXxXxXxXxXxX&quot;
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>CREATE_REVERSE=”true”
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>DNS_ENTRIES=dns_entries.txt
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>cat &lt;&lt;EOF&gt;${DNS_ENTRIES}
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>server1.example.com 192.168.0.1
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>server2.example.com 192.168.0.2
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>server3.example.com 192.168.0.3
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>EOF
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>egrep -v &#39;^#&#39; ${DNS_ENTRIES} | while read LINE
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>do
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>  NAME=$(echo ${LINE} | awk &#39;{print $1}&#39;)
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>  IP=$(echo ${LINE} | awk &#39;{print $2}&#39;)
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>  FQDN=&quot;${NAME}.${DOMAIN}&quot;
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>  if [[ &quot;${CREATE_REVERSE}&quot; == &quot;true&quot; ]]
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>  then
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>    curl --request POST --data &#39;package=unlimited&#39; &quot;${SERVER}/api/zones/records/add?token=${TOKEN}&amp;domain=${FQDN}&amp;type=A&amp;ipAddress=${IP}&amp;ptr=true&quot;
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>  else
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>    curl --request POST --data &#39;package=unlimited&#39; &quot;${SERVER}/api/zones/records/add?token=${TOKEN}&amp;domain=${FQDN}&amp;type=A&amp;ipAddress=${IP}”
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>  fi
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>done
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>Searching for Inactive DNS Records
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>This script can be used to generate a CSV of inactive A records which have not been accessed since a specific date:
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>#!/bin/bash
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a>
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a># Return all A records that have no activity since this date
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>INACTIVE_DATE=&quot;2021-01-01T00:00:00&quot;
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a>
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a># User and server details
<a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a>DNS_SERVER=&quot;172.20.129.10&quot;
<a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a>DNS_SERVER_ADMIN=&quot;http://${DNS_SERVER}:5380&quot;
<a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a>DNS_TOKEN=&quot;xXxXxXxXxXxXxXxXxXxXxXxXxXxXxX&quot;
<a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a>
<a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a>WORK_DIR=$(mktemp -d -t $(basename $0).XXXXXX)
<a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a>
<a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a>for ZONE in $(curl --request POST --data &#39;package=unlimited&#39; &quot;${DNS_SERVER_ADMIN}/api/zones/list?token=${DNS_TOKEN}&quot; 2&gt;/dev/null | jq &quot;.response.zones[].name&quot; | sed &#39;s/&quot;//g&#39;)
<a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a>do
<a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a>  mkdir -p ${WORK_DIR}/zones/${ZONE}
<a id="__codelineno-4-47" name="__codelineno-4-47" href="#__codelineno-4-47"></a>  curl --request POST --data &#39;package=unlimited&#39; &quot;${DNS_SERVER_ADMIN}/api/zones/records/get?token=${DNS_TOKEN}&amp;zone=${ZONE}&amp;domain=${ZONE}&amp;listZone=true&quot; 2&gt;/dev/null | jq &quot;.response.records[] | select (.type==\&quot;A\&quot; and .lastUsedOn&lt;\&quot;${INACTIVE_DATE}\&quot;)&quot; &gt;${WORK_DIR}/zones/${ZONE}/unused_records.txt 2&gt;/dev/null
<a id="__codelineno-4-48" name="__codelineno-4-48" href="#__codelineno-4-48"></a>  if [[ ! -s ${WORK_DIR}/zones/${ZONE}/unused_records.txt ]]
<a id="__codelineno-4-49" name="__codelineno-4-49" href="#__codelineno-4-49"></a>  then
<a id="__codelineno-4-50" name="__codelineno-4-50" href="#__codelineno-4-50"></a>    rm -rf ${WORK_DIR}/zones/${ZONE}
<a id="__codelineno-4-51" name="__codelineno-4-51" href="#__codelineno-4-51"></a>  fi
<a id="__codelineno-4-52" name="__codelineno-4-52" href="#__codelineno-4-52"></a>done
<a id="__codelineno-4-53" name="__codelineno-4-53" href="#__codelineno-4-53"></a>
<a id="__codelineno-4-54" name="__codelineno-4-54" href="#__codelineno-4-54"></a>cat /dev/null&gt;dns_unused_entries.csv
<a id="__codelineno-4-55" name="__codelineno-4-55" href="#__codelineno-4-55"></a>echo &quot;ZONE,FQDN,IP,COMMENT,LAST USED ON&quot; | tee -a dns_unused_entries.csv
<a id="__codelineno-4-56" name="__codelineno-4-56" href="#__codelineno-4-56"></a>for ZONE in $(ls ${WORK_DIR}/zones)
<a id="__codelineno-4-57" name="__codelineno-4-57" href="#__codelineno-4-57"></a>do
<a id="__codelineno-4-58" name="__codelineno-4-58" href="#__codelineno-4-58"></a>  for FQDN in $(cat ${WORK_DIR}/zones/${ZONE}/unused_records.txt | jq &#39;.name&#39; | sed &#39;s/&quot;//g&#39;)
<a id="__codelineno-4-59" name="__codelineno-4-59" href="#__codelineno-4-59"></a>  do
<a id="__codelineno-4-60" name="__codelineno-4-60" href="#__codelineno-4-60"></a>    COMMENT=$(cat ${WORK_DIR}/zones/${ZONE}/unused_records.txt | jq &quot;. | select (.name==\&quot;${FQDN}\&quot;)&quot; | jq .comments | sed &#39;s/&quot;//g&#39;)
<a id="__codelineno-4-61" name="__codelineno-4-61" href="#__codelineno-4-61"></a>    IP=$(cat ${WORK_DIR}/zones/${ZONE}/unused_records.txt | jq &quot;. | select (.name==\&quot;${FQDN}\&quot;)&quot; | jq .rData.ipAddress | sed &#39;s/&quot;//g&#39;)
<a id="__codelineno-4-62" name="__codelineno-4-62" href="#__codelineno-4-62"></a>    LAST_USED_ON=$(cat ${WORK_DIR}/zones/${ZONE}/unused_records.txt | jq &quot;. | select (.name==\&quot;${FQDN}\&quot;)&quot; | jq .lastUsedOn | sed &#39;s/&quot;//g&#39;)
<a id="__codelineno-4-63" name="__codelineno-4-63" href="#__codelineno-4-63"></a>    echo &quot;${ZONE},${FQDN},${IP},${COMMENT},${LAST_USED_ON}&quot; | tee -a dns_unused_entries.csv
<a id="__codelineno-4-64" name="__codelineno-4-64" href="#__codelineno-4-64"></a>  done
<a id="__codelineno-4-65" name="__codelineno-4-65" href="#__codelineno-4-65"></a>done
<a id="__codelineno-4-66" name="__codelineno-4-66" href="#__codelineno-4-66"></a>rm -rf ${WORK_DIR}
<a id="__codelineno-4-67" name="__codelineno-4-67" href="#__codelineno-4-67"></a>exit 0
</code></pre></div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 Red Hat NA-SSA Team
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.instance", "navigation.top", "toc.integrate", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>